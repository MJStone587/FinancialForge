<!DOCTYPE html>
<html>
  <head>
    <link
    rel="icon"
    type="image/x-icon"
    href="/images/favicon_io/favicon.ico"
  />
    <title><%= title %></title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <script
    src="https://kit.fontawesome.com/9b6b4f0fa1.js"
    crossorigin="anonymous"
  ></script>
  </head>

  <% if(authCheck){ %> 
    <%- include("navbarLI") %> 
    <% } else { %> 
    <%-include("navbar") %> 
   <% } %>

   <div class="expenses_content">

    <div class="expensesHeader">
      <h1 id="expensesHeader_h1"><%= authUser %>'s <%= title %></h1>
      <p id="expensesHeader_p">Here you can review, edit, delete, and add receipts</p>
      <img id="expensesHeader_img" src="/images/receiptimage.png">
    </div>

    <div class="expensesBody">
      <div class="expensesBody_headings">
        <h1 id="title_heading">Title</h1>
        <h1 id="amount_heading">Amount</h1>
        <h1 id="date_heading">Date</h1>
      </div>

      <div class="expensesBody_data">
        <% for(let i = 0; i < receipt_list.length; i++) { %>
        <!--<a href="/catalog/receipt/<%= receipt_list[i]._id %>"></a>-->
          <a href="/catalog/receipt/<%= receipt_list[i]._id %>" id="expensesBody_title"><%= receipt_list[i].description %></a>
          <p id="expensesBody_amt"><%= "$" + receipt_list[i].total %> </p>
          <p id="expensesBody_date"><%= receipt_list[i].date_formatted %></p>
          <% } %>
      </div>
    </div>

    <% let total = 0; %>
    <% for(let i = 0; i < receipt_list.length; i++) { %> 
     <% total += receipt_list[i].total; %> 
    <% } %>
    <% function round(value, decimals) { %>
      <% return Number(Math.round(value +'e'+ decimals) +'e-'+ decimals).toFixed(decimals); %>
    <% } %>
    
    <h2 id="expensesBody_total">Receipt Totals: $<%=round(total, 2);%></h2>
    <a id="expensesBody_create" href="receipt/create">+ Add Receipt</a>
</div>
  <%- include("footer"); %>
</html>
